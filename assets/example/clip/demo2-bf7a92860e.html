<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>用clip实现剪切图片上传功能</title><style>*{margin:0;padding:0}body{height:2000px}.drop-panel{position:absolute;left:200px;top:200px;width:150px;height:120px;border:1px solid #000}.drag_inner{width:100%;height:100%;cursor:move;background-color:#fff;opacity:.3}.drop-inner_item{position:absolute;width:4px;height:4px;border:1px solid #000;background:#fff;overflow:hidden}.drop-inner_item.bottom-right,.drop-inner_item.top-left{cursor:nw-resize}.drop-inner_item.bottom-left,.drop-inner_item.top-right{cursor:ne-resize}.drop-inner_item.bottom-center,.drop-inner_item.top-center{cursor:n-resize}.drop-inner_item.left-center,.drop-inner_item.right-center{cursor:e-resize}.drop-inner_item.top-center,.drop-inner_item.top-left,.drop-inner_item.top-right{top:-3px;margin-left:-3px}.drop-inner_item.bottom-center,.drop-inner_item.bottom-left,.drop-inner_item.bottom-right{bottom:-3px;margin-left:-3px}.drop-inner_item.bottom-left,.drop-inner_item.top-left{left:0}.drop-inner_item.bottom-center,.drop-inner_item.top-center{left:50%}.drop-inner_item.bottom-right,.drop-inner_item.top-right{left:100%}.drop-inner_item.left-center{top:50%;left:0;margin:-3px 0 0 -3px}.drop-inner_item.right-center{top:50%;right:0;margin:-3px -3px 0 0}</style></head><body><clip id="clip"></clip> 123123132123123123<div class="drop-panel" id="drag"><div class="drag_inner"></div><span placment="top-left" class="drop-inner_item top-left"></span><span placment="top-center" class="drop-inner_item top-center"></span><span placment="top-right" class="drop-inner_item top-right"></span><span placment="left-center" class="drop-inner_item left-center"></span><span placment="right-center" class="drop-inner_item right-center"></span><span placment="bottom-left" class="drop-inner_item bottom-left"></span><span placment="bottom-center" class="drop-inner_item bottom-center"></span><span placment="bottom-right" class="drop-inner_item bottom-right"></span></div><script src="../../../assets/example/clip/clip-9d2764df08.js"></script><script>function getByClass(e,r){e=e||document;try{return document.querySelectorAll("."+r)}catch(t){for(var o=[],a=e.getElementsByTagName("*"),n=new RegExp("\\b"+r+"\\b","i"),g=0,l=a.length;g<l;g++)n.test(a[g].className)&&o.push(a[g]);return o}}function getScrollRect(){return{y:(document.documentElement||document.body).scrollTop,x:(document.documentElement||document.body).scrollLeft}}var oDrag=document.getElementById("drag");function _rect(t){var e=t.getBoundingClientRect();return{x:e.x||e.left,y:e.y||e.top,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top,left:e.left,top:e.top,right:e.right,bottom:e.bottom}}var drag=function(r,g){r.onmousedown=function(t){t=t||window.event;var e=_rect(r),a={};a.x=t.clientX-e.x,a.y=t.clientY-e.y;var n=_rect(oDrag);return r.setCapture&&r.setCapture(),document.onmousemove=function(t){t=t||window.event;var e=getScrollRect(),r=t.clientX-a.x,o=t.clientY-a.y;switch(g){case"nt":if(o>n.bottom)return;oDrag.style.height=n.bottom-o+"px",oDrag.style.top=e.y+o+"px";break;case"nb":oDrag.style.height=o-n.top+"px";break;case"nl":if(r>n.right)return;oDrag.style.width=n.right-r+"px",oDrag.style.left=e.x+r+"px";break;case"nr":oDrag.style.width=r-n.left+"px";break;case"nwt":if(r>n.right)return;if(o>n.bottom)return;oDrag.style.height=n.bottom-o+"px",oDrag.style.top=e.y+o+"px",oDrag.style.width=n.right-r+"px",oDrag.style.left=e.x+r+"px";break;case"nwb":oDrag.style.width=r-n.left+"px",oDrag.style.height=o-n.top+"px";break;case"ner":if(o>n.bottom)return;oDrag.style.height=n.bottom-o+"px",oDrag.style.width=t.clientX-a.x-n.left+"px",oDrag.style.top=e.y+o+"px";break;case"nel":oDrag.style.width=n.right-r+"px",oDrag.style.height=o-n.top+"px",oDrag.style.left=e.x+r+"px";break;default:oDrag.style.top=e.y+o+"px",oDrag.style.left=e.x+r+"px"}},!(document.onmouseup=function(){r.releaseCapture&&r.releaseCapture(),a=e=null,this.onmousemove=null,this.onmouseup=null})}};drag(getByClass(oDrag,"top-center")[0],"nt"),drag(getByClass(oDrag,"bottom-center")[0],"nb"),drag(getByClass(oDrag,"left-center")[0],"nl"),drag(getByClass(oDrag,"right-center")[0],"nr"),drag(getByClass(oDrag,"top-left")[0],"nwt"),drag(getByClass(oDrag,"bottom-right")[0],"nwb"),drag(getByClass(oDrag,"top-right")[0],"ner"),drag(getByClass(oDrag,"bottom-left")[0],"nel"),drag(getByClass(oDrag,"drag_inner")[0])</script></body></html>